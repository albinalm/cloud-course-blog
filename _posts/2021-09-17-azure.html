---
layout: post
title: Serverless application hosting with Azure
date: 2021-09-17 17:00 -0400
subtitle: Crystal, Ruby, Azure... Why do developers name their products after stones?
categories: [Assignments, Azure]
background: '/img/posts/azure/banner.jpg'
---
<head>
    <link rel="shortcut icon" type="image/x-icon" href="https://techshelter.albin.dev/favicon.png">
</head>

<h1>Serverless computing in a nutshell</h1>
<p>First of all "Serverless hosting" isn't really serverless at all, so the one who came up with the name kind of sucks. But if you look at it from the right angle and maybe with a telescope you might get why it's called like that. <br>
Well, the reason being that it's a way to manage your back-end server without paying for or hosting your own server. You basically publish the service at your provider and be charged per use/computation instead of continous debiting. 
Long story short, it's named serverless because the developer doesn't need to worry about any servers, not because theres isn't any.</p>
<h2>Function-as-a-service</h2>
<p>Function as a service(Faas) is one of many serverless methods. It's primarily used to execute smaller events and running code reactively on demand. In this article i'll soon talk about how I made a calculator API as a <strong>FaaS</strong>. <br>
Instead of making the entire library and hosting it on a server and giving response to each request, I can host it on for instance Azure as a FaaS. There it can be executed directly in the cloud and I only need to pay each time it's executed. This makes it very flexible and cost efficient. 
It's like paying for each MB when using your mobile network instead of having a fixed amount. Sometimes you don't use up everything and you end up wasting money.</p>
<h5>Advantages of serverless & FaaS</h5>
<p>There are many advantages of using FaaS, some of them being:</p>
<ul>
    <li><strong>Focusing on whats important.</strong> FaaS saves developers the headache of worrying about servers and operation.</li>
    <li><strong>Pricing.</strong> FaaS scales according to your needs. No need to pay for operating servers, just paying for the service & code</li>
    <li><strong>Less worrying about capacity,</strong> Need more services? More computing? No need to upgrade your infrastructure. Just keep adding, since it scales to your demand. This point ties into the first one.</li>
</ul>
<h5>Disadvantages of serverless & FaaS</h5>
<p>Obviously such thing also comes with it's downsides. In some cases there is just simply better to do it yourself!</p>
<ul>
    <li><strong>Pricing.</strong> This is kinda funny because it was also an advantage. Don't forget that you also pay for service and platform contribution. If you plan your own build well and are efficient it will be cheaper to host yourself in the long run. Bothersome,  but cheaper.</li>
    <li><strong>Vendor lock-in.</strong> You become tied to your vendor. If you change your mind later on it is a very troublesome task to migrate -  even if vendors tell you it's simple.</li>
    <li><strong>Control.</strong> You place your code and infrastructure in hands of others. This might be a good thing because you can focus on development, but in the end you are still out of reach if something happens.</li>
</ul>
<h2>Developing a FaaS calculator API with a CI pipeline</h2>
<p>Earlier today I tried this out and developed some code to do some "quick mafs" and then return the result. I did this directly on the Azure portal.<br><br>
First of all when I arrived at the overview page of Azure I created a new Function app and added a function called Calculate. The language for this library is C#.
<img src="https://techshelter.albin.dev/img/posts/azure/azure_01.jpg"><br>
<a href="https://techshelter.albin.dev/img/posts/azure/azure_code.jpg" target="_blank" style="color: cornflowerblue !important;">You can view the code here</a><br>
The code will take input as a post request, format it and return the result as a string. Pretty simple.</p>
<h5>Connecting the application to a GitHub repository.</h5>
<p>Before doing anything I made an empty repository in my GitHub profile. <br>To connect my application I first navigated to the "Distribution center" tab in my application overview. From there I connected to the repository and generated a <a href="#" target="_blank" style="color: cornflowerblue !important;"><strong>Personal access token.</strong></a>
<br>Doing this generates a workflow file in the repository</p>
<img src="https://techshelter.albin.dev/img/posts/azure/azure_02.jpg">
<p>Now I basically was connected to my empty repository with a broken workflow pipeline. Everything was a mess, but a good one since I now had everything I needed to set up my CI pipe!<br>
To begin making the repository in sync with the Azure project, and making <strong>Dotnet restore</strong> work in the pipeline I cloned the empty repository to VSCode and downloaded the source files from Azure.<br></p>
<img src="https://techshelter.albin.dev/img/posts/azure/azure_03.jpg">
<p>Afterards pasting all of these source files in the cloned repository folder and pushing.<br>
<strong>Voila!</strong> GitHub repository was now in sync with the Azure project.</p>
<br>
<br>
<h6>Thank you for reading!</h6>
<p>/Albin</p>
<p><i>Sources:</i></p>

